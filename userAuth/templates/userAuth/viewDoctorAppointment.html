{% extends 'userAuth/baseUserDash.html' %}
{% block title %} Doctors Appointment{% endblock title %}
{% load static %}
{% load auth_extras %}


{% block userDashContent %}

{% if request.user.is_authenticated %}

{% if request.user|has_group:"staff" %}
<div class="container">
    {% if doctor %}
    <h4 class="mt-5 mb-2" style="text-align: center;">Doctor Appointments</h4>
    <div class="row gy-5 justify-content-center">

        <div style="text-align: center;" class="col-lg-4 col-12 doctor-image-container border p-5">
            <img class="img-fluid" src="/media/{{doctor.profile_pic}}" alt="doctor picture">
            <h3>Dr. {{doctor.fullName}}</h3>
            <p>{{doctor.department}}</p>    
        </div>

        <div class="col-lg-8 col-12 doctor-details-container">
            <div class="experience-education-container p-5">
                <div class="experience">
                    <h5>Experience</h5>
                    <p>{{doctor.experience}}</p>
                </div>

                <div class="education">
                    <h5>Education</h5>
                    <p>{{doctor.education}}</p>
                </div>
            </div>
        </div>

    </div>

    {% else %}

    <h4 style="text-align: center; color: white;" class="bg-danger mt-5 p-3">Sorry ! We did not find any doctor</h4>

    {% endif %}

    <div class="appointment-lists-container mt-3">
        <h4 class="mt-3 mb-3">Appointments</h4>
        <div class="d-flex gap-3">
        <button type="button" class="btn btn-light btn-outline-primary">Today</button>
        <button type="button" class="btn btn-light">Tomorrow</button>
        <button type="button" class="btn btn-light">Day after tomorrow</button>
        </div>

        <div class="appointed-patient-container">
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead>
                      <tr>
                        <th scope="col">#</th>  
                        <th scope="col">Id</th>
                        <th scope="col">Patient</th>
                        <th scope="col">Date</th>
                        <th scope="col">Time</th>
                        <th scope="col">Status</th>
                        <th scope="col">Payment status</th>
                        <th scope="col">Actions</th>
                      </tr>
                    </thead>
                    {% if todayAppointment %}
                    <tbody>
                        {% for app in todayAppointment %}
                      <tr>
                        <th scope="row">{{forloop.counter}}</th>
                        <td>{{app.id}}</td>
                        {% if app.patient%}
                        <td>{{app.patient.fullName}}</td>
                        {% else%}
                        <td>{{app.nonRegisteredPatient.fullName}}</td>
                        {% endif %}

                        <td>{{app.appointmentDate}}</td>
                        <td>{{app.appointmentTime}}</td>
                        <td>{{app.appointmentStatus}}</td>
                        <td>{{app.paymentStatus}}</td>
                        <td>actions</td>
                      </tr>
        
                      {% endfor %}
                    </tbody>
                    {% endif %}
                  </table>
        </div>
    </div>

</div

{% endif %}
{% endif %}
{% endblock userDashContent %}